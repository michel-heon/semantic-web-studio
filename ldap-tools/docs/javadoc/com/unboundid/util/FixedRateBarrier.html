<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (1.8.0_292) on Tue Nov 16 06:15:02 EST 2021 -->
<title>FixedRateBarrier (UnboundID LDAP SDK for Java 6.0.2)</title>
<meta name="date" content="2021-11-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FixedRateBarrier (UnboundID LDAP SDK for Java 6.0.2)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/unboundid/util/FixedArrayOutputStream.html" title="class in com.unboundid.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/unboundid/util/FormattableColumn.html" title="class in com.unboundid.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/unboundid/util/FixedRateBarrier.html" target="_top">Frames</a></li>
<li><a href="FixedRateBarrier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.unboundid.util</div>
<h2 title="Class FixedRateBarrier" class="title">Class FixedRateBarrier</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.unboundid.util.FixedRateBarrier</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre><a href="../../../com/unboundid/util/ThreadSafety.html" title="annotation in com.unboundid.util">@ThreadSafety</a>(<a href="../../../com/unboundid/util/ThreadSafety.html#level--">level</a>=<a href="../../../com/unboundid/util/ThreadSafetyLevel.html#COMPLETELY_THREADSAFE">COMPLETELY_THREADSAFE</a>)
public final class <a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.89">FixedRateBarrier</a>
extends java.lang.Object
implements java.io.Serializable</pre>
<div class="block">Instances of this class are used to ensure that certain actions are performed
 at a fixed rate per interval (e.g. 10000 search operations per second).
 <p>
 Once a class is constructed with the duration of an interval and the target
 per interval, the <a href="../../../com/unboundid/util/FixedRateBarrier.html#await--"><code>await()</code></a> method only releases callers at the
 specified number of times per interval.  This class is most useful when
 the target number per interval exceeds the limits of other approaches
 such as <code>java.util.Timer</code> or
 <code>java.util.concurrent.ScheduledThreadPoolExecutor</code>.  For instance,
 this does a good job of ensuring that something happens about 10000 times
 per second, but it's overkill to ensure something happens five times per
 hour.  This does come at a cost.  In the worst case, a single thread is
 tied up in a loop doing a small amount of computation followed by a
 Thread.yield().  Calling Thread.sleep() is not possible because many
 platforms sleep for a minimum of 10ms, and all platforms require sleeping
 for at least 1ms.
 <p>
 Testing has shown that this class is accurate for a "no-op"
 action up to two million per second, which vastly exceeds its
 typical use in tools such as <code>searchrate</code> and <code>modrate</code>.  This
 class is designed to be called by multiple threads, however, it does not
 make any fairness guarantee between threads; a single-thread might be
 released from the <a href="../../../com/unboundid/util/FixedRateBarrier.html#await--"><code>await()</code></a> method many times before another thread
 that is blocked in that method.
 <p>
 This class attempts to smooth out the target per interval throughout each
 interval.  At a given ratio, R between 0 and 1, through the interval, the
 expected number of actions to have been performed in the interval at that
 time is R times the target per interval.  That is, 10% of the way through
 the interval, approximately 10% of the actions have been performed, and
 80% of the way through the interval, 80% of the actions have been performed.
 <p>
 It's possible to wait for multiple "actions" in one call with
 <a href="../../../com/unboundid/util/FixedRateBarrier.html#await-int-"><code>await(int)</code></a>. An example use is rate limiting writing bytes out to
 a file. You could configure a FixedRateBarrier to only allow 1M bytes to
 be written per second, and then call <a href="../../../com/unboundid/util/FixedRateBarrier.html#await-int-"><code>await(int)</code></a> with the size of
 the byte buffer to write. The call to <a href="../../../com/unboundid/util/FixedRateBarrier.html#await-int-"><code>await(int)</code></a> would block until
 writing out the buffer would not exceed the desired rate.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../serialized-form.html#com.unboundid.util.FixedRateBarrier">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#FixedRateBarrier-long-int-">FixedRateBarrier</a></span>(long&nbsp;intervalDurationMs,
                int&nbsp;perInterval)</code>
<div class="block">Constructs a new FixedRateBarrier, which is active until
 <a href="../../../com/unboundid/util/FixedRateBarrier.html#shutdownRequested"><code>shutdownRequested</code></a> is called.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#await--">await</a></span>()</code>
<div class="block">This method waits until it is time for the next 'action' to be performed
 based on the specified interval duration and target per interval.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#await-int-">await</a></span>(int&nbsp;count)</code>
<div class="block">This method waits until it is time for the next <code>count</code> 'actions'
 to be performed based on the specified interval duration and target per
 interval.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/unboundid/util/ObjectPair.html" title="class in com.unboundid.util">ObjectPair</a>&lt;java.lang.Long,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#getTargetRate--">getTargetRate</a></span>()</code>
<div class="block">Retrieves information about the current target rate for this barrier.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#isShutdownRequested--">isShutdownRequested</a></span>()</code>
<div class="block">Returns <code>true</code> if shutdown has been requested.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#setRate-long-int-">setRate</a></span>(long&nbsp;intervalDurationMs,
       int&nbsp;perInterval)</code>
<div class="block">Updates the rates associated with this FixedRateBarrier.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/unboundid/util/FixedRateBarrier.html#shutdownRequested--">shutdownRequested</a></span>()</code>
<div class="block">Shuts down this barrier.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FixedRateBarrier-long-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FixedRateBarrier</h4>
<pre>public&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.191">FixedRateBarrier</a>(long&nbsp;intervalDurationMs,
                        int&nbsp;perInterval)</pre>
<div class="block">Constructs a new FixedRateBarrier, which is active until
 <a href="../../../com/unboundid/util/FixedRateBarrier.html#shutdownRequested"><code>shutdownRequested</code></a> is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>intervalDurationMs</code> - The duration of the interval in milliseconds.</dd>
<dd><code>perInterval</code> - The target number of times that <a href="../../../com/unboundid/util/FixedRateBarrier.html#await--"><code>await()</code></a> should
                      return per interval.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setRate-long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRate</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.206">setRate</a>(long&nbsp;intervalDurationMs,
                    int&nbsp;perInterval)</pre>
<div class="block">Updates the rates associated with this FixedRateBarrier.  The new rate
 will be in effect when this method returns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>intervalDurationMs</code> - The duration of the interval in milliseconds.</dd>
<dd><code>perInterval</code> - The target number of times that <a href="../../../com/unboundid/util/FixedRateBarrier.html#await--"><code>await()</code></a> should
                      return per interval.</dd>
</dl>
</li>
</ul>
<a name="await--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>await</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.237">await</a>()</pre>
<div class="block">This method waits until it is time for the next 'action' to be performed
 based on the specified interval duration and target per interval.  This
 method can be called by multiple threads simultaneously.  This method
 returns immediately if shutdown has been requested.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if shutdown has been requested and  false
          otherwise.</dd>
</dl>
</li>
</ul>
<a name="await-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>await</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.272">await</a>(int&nbsp;count)</pre>
<div class="block">This method waits until it is time for the next <code>count</code> 'actions'
 to be performed based on the specified interval duration and target per
 interval.  To achieve the target rate, it's recommended that on average
 <code>count</code> is small relative to <code>perInterval</code> (and the
 <code>count</code> must not be larger than <code>perInterval</code>).  A
 <code>count</code> value will not be split across intervals, and due to timing
 issues, it's possible that a <code>count</code> that barely fits in the
 current interval will need to wait until the next interval.  If it's not
 possible to use smaller 'count' values, then increase <code>perInterval</code>
 and <code>intervalDurationMs</code> by the same relative amount.  As an
 example, if <code>count</code> is on average 1/10 as big as
 <code>perInterval</code>, then you can expect to attain 90% of the target
 rate.  Increasing <code>perInterval</code> and <code>intervalDurationMs</code> by
 10x means that 99% of the target rate can be achieved.
 <p>
 This method can be called by multiple threads simultaneously.  This method
 returns immediately if shutdown has been requested.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>count</code> - The number of 'actions' being performed.  It must be less
                than or equal to <code>perInterval</code>, and is recommended to
                be fairly small relative to <code>perInterval</code> so that it
                is easier to achieve the desired rate and exhibit smoother
                performance.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if shutdown has been requested and  false
          otherwise.</dd>
</dl>
</li>
</ul>
<a name="getTargetRate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTargetRate</h4>
<pre><a href="../../../com/unboundid/util/NotNull.html" title="annotation in com.unboundid.util">@NotNull</a>
public&nbsp;<a href="../../../com/unboundid/util/ObjectPair.html" title="class in com.unboundid.util">ObjectPair</a>&lt;java.lang.Long,java.lang.Integer&gt;&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.399">getTargetRate</a>()</pre>
<div class="block">Retrieves information about the current target rate for this barrier.  The
 value returned will include a <code>Long</code> that specifies the duration of
 the current interval in milliseconds and an <code>Integer</code> that specifies
 the number of times that the <a href="../../../com/unboundid/util/FixedRateBarrier.html#await--"><code>await()</code></a> method should return per
 interval.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Information about hte current target rate for this barrier.</dd>
</dl>
</li>
</ul>
<a name="shutdownRequested--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownRequested</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.411">shutdownRequested</a>()</pre>
<div class="block">Shuts down this barrier.  Future calls to await() will return immediately.</div>
</li>
</ul>
<a name="isShutdownRequested--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isShutdownRequested</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../src-html/com/unboundid/util/FixedRateBarrier.html#line.424">isShutdownRequested</a>()</pre>
<div class="block">Returns <code>true</code> if shutdown has been requested.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if shutdown has been requested and <code>false</code>
          otherwise.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/unboundid/util/FixedArrayOutputStream.html" title="class in com.unboundid.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/unboundid/util/FormattableColumn.html" title="class in com.unboundid.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/unboundid/util/FixedRateBarrier.html" target="_top">Frames</a></li>
<li><a href="FixedRateBarrier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><div id="footer">Copyright &copy; 2008-2021 &ndash; Ping Identity &ndash; All Rights Reserved.</div></small></p>
</body>
</html>
